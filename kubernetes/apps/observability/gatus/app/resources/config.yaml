---
metrics: true
debug: true

storage:
  type: postgres
  path: ${DB_URI}
  caching: true
alerting:
  telegram:
    id: ${TELEGRAM_CHANNEL_ID}
    token: ${TELEGRAM_TOKEN}
connectivity:
  checker:
    target: 1.1.1.1:53
    interval: 1m

endpoints:
  - name: hearbeat
    group: external
    ui:
      hide-hostname: true
      hide-url: true
    url: ${STATUS_PAGE_HEARTBEAT_URL}
    interval: 1m
    client:
      dns-resolver: tcp://1.1.1.1:53
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: telegram
        send-on-resolved: true

  - name: s3.monosense.dev
    group: certificates
    url: tls://s3.monosense.dev:443
    interval: 24h
    conditions:
      - "[CONNECTED] == true"
      - "[CERTIFICATE_EXPIRATION] == 336h"
    alerts:
      - type: telegram

  - name: flux-webhook
    url: https://flux-webhook.monosense.io
    interval: 1m
    client:
      dns-resolver: tcp://1.1.1.1:53
    conditions:
      - "[STATUS] == 404"

ui:
  title: Status | Gatus
  header: mono cluster
  logo: https://avatars.githubusercontent.com/u/11927171
  link: https://github.com/trosvald
  buttons:
    - name: Github
      link: https://github.com/trosvald
    - name: Homelab
      link: https://github.com/trosvald/home-ops

web:
  port: ${GATUS_WEB_PORT}
