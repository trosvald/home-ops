---
# yaml-language-server: $schema=https://raw.githubusercontent.com/ishioni/CRDs-catalog/main/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: plex-meta-manager
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: plex-meta-manager-secret
    creationPolicy: Owner
    template:
      engineVersion: v2
      data:
        # Plex Meta Manager
        PMM_PLEX_API_KEY: "{{ .plex_token }}"
        PMM_TAUTULLI_API_KEY: "{{ .tautulli_api_key }}"
        PMM_TMDB_API_KEY: "{{ .tmdb_api_key }}"
        PMM_OMDB_API_KEY: "{{ .omdb_api_key }}"
        # PMM_MDBLIST_API_KEY: "{{ .mdblist_api_key }}"
        PMM_RADARR_API_KEY: "{{ .radarr_api_key }}"
        PMM_SONARR_API_KEY: "{{ .sonarr_api_key }}"
        PMM_TRAKT_CLIENT_ID: "{{ .trakt_client_id }}"
        PMM_TRAKT_CLIENT_SECRET: "{{ .trakt_client_secret }}"
        PMM_TRAKT_PIN: "{{ .trakt_pin }}"
  dataFrom:
    - extract:
        key: plex
    - extract:
        key: radarr
    - extract:
        key: sonarr